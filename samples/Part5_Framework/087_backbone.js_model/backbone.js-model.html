<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Backbone.js Model sample</title>
  <script type="text/javascript" src="http://code.jquery.com/jquery-1.9.0.js"></script>
  <script type="text/javascript" src="js/underscore-1.4.3.js"></script>
  <script type="text/javascript" src="js/backbone-0.9.9.js"></script>
  <script type="text/javascript" src="js/greeter.js"></script>
  <script type="text/javascript">
    $(function () {
      // あいさつ表示メソッド
      function showGreeting(greeter) {
        $("#console").text(greeter.greet());
      }

      var greeter = new Greeter();

      // (2) Modelのchangeイベントを購読
      greeter.bind("change", function (greeter) {
        showGreeting(greeter);
      });

      // (3) Modelへの値設定
      $("#set-name").click(function () {
        // changeイベントが発生する
        greeter.set("name", $("#name").val());
      });
      $("#set-name-silent").click(function () {
        // changeイベントの発生を抑制
        greeter.set("name", $("#name").val(), { silent: true });
      });

      // (4) Modelから値取得
      $("#get-name").click(function () {
        alert(greeter.get("name"));
      });

      // (5) Modelへの値設定解除
      $("#unset-name").click(function () {
        // changeイベントが発生する
        greeter.unset("name");
      });

      // (6) Modelの属性存在判定
      $("#has-name").click(function () {
        alert(greeter.has("name"));
      });

      showGreeting(greeter);
    });
  </script>
</head>
<body>
  <div>
    名前 : <input type="text" id="name" />
  </div>
  <div>
    <button id="set-name">名前設定</button>
    <button id="set-name-silent">名前設定(silent)</button>
    <button id="get-name">名前取得</button>
  </div>
  <div>
    <button id="unset-name">名前設定解除</button>
    <button id="has-name">名前設定有無確認</button>
  </div>
  <div id="console"></div>
</body>
</html>
